<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>张国丰 - 记录生活的点滴美好</title><meta name="author" content="abumaster"><meta name="copyright" content="abumaster"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="明年岂无年，心事恐蹉跎。努力尽今夕，少年犹可夸。">
<meta property="og:type" content="website">
<meta property="og:title" content="张国丰">
<meta property="og:url" content="https://abumaster.com/page/6/index.html">
<meta property="og:site_name" content="张国丰">
<meta property="og:description" content="明年岂无年，心事恐蹉跎。努力尽今夕，少年犹可夸。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://abumaster.com/uploads/logo.png">
<meta property="article:author" content="abumaster">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://abumaster.com/uploads/logo.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://abumaster.com/page/6/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?0181b489d29ea00055dcd71fb036bb70";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-180676830-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-180676830-1');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '张国丰',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-10-07 15:02:07'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/sitemap.xml" title="张国丰" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/uploads/logo.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">70</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">38</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/mywallpaper/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/hpptalk/"><i class="fa-fw fas fa-envelope"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">张国丰</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/mywallpaper/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/hpptalk/"><i class="fa-fw fas fa-envelope"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/02/21/7706420f8190/" title="Java对象">     <img class="post_bg" src="/uploads/default-header.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java对象"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/21/7706420f8190/" title="Java对象">Java对象</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-21T15:40:22.000Z" title="发表于 2021-02-21 15:40:22">2021-02-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a></span></div><div class="content">一个对象在可以被使用之前必须被正确地初始化，实例化，对象是如何创建，由什么组成，又是放在JVM的哪个地方，以及如何使用对象。


创建对象的方式
使用new关键字创建，这是最常见的一种方式，可以调用任意的构造函数来创建1Person p = new Person();
使用Class类的newInstance方法，只能调用空参构造器123//获取类对象Class aClass = Class.forName(&quot;priv.starfish.Person&quot;);Person p1 = (Person) aClass.newInstance();
Constructor的 newInstance(xxx)，对构造器没有要求1234Class aClass = Class.forName(&quot;priv.starfish.Person&quot;);//获取构造器Constructor constructor = aClass.getConstructor();Person p2 = (Person) constructor.newInstance();
使用clone ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/02/21/f7c3169388c1/" title="几种引用的区别">     <img class="post_bg" src="/uploads/default-header.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="几种引用的区别"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/21/f7c3169388c1/" title="几种引用的区别">几种引用的区别</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-21T08:47:11.000Z" title="发表于 2021-02-21 08:47:11">2021-02-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a></span></div><div class="content">Java中的引用类似C++中的指针，用来指向一个对象，指向对象的变量叫做引用变量，除了8中基本类型，其他的类型都是引用类型，主要包括：类、接口、数组、枚举、注解。



主要分为四种引用：强引用（Strong Reference）、软引用（Soft Reference）、弱引用（Weak Reference）、虚引用（Phantom Reference），引用强度依次减弱，生命周期也不一样。JVM的垃圾回收机制分别进行不同的处理。

强引用最常见的一种引用，是将一个对象赋值给另一个引用变量，这个引用变量就是强引用，当一个对象被强引用变量引用时，一直是可到达状态，GC是不能回收的，因此也是导致内存泄漏的常见原因之一，比如：
1234567Object obj1 = new Object();// 强引用Object obj2 = obj1;obj1=null;System.gc();System.out.println(&quot;对象1：&quot;+obj1);System.out.println(&quot;对象2：&quot;+obj2);

软引用如果一个对象只具有软引用，那就 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/02/20/1e043ca4a77e/" title="Java性能调优">     <img class="post_bg" src="/uploads/default-header-2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java性能调优"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/20/1e043ca4a77e/" title="Java性能调优">Java性能调优</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-20T16:35:10.000Z" title="发表于 2021-02-20 16:35:10">2021-02-20</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a></span></div><div class="content">如何根据项目的需要设置Java运行参数，以达到更好的运行效率，及出现性能瓶颈时如何优化，还有哪些潜在的经验和规则。


JVM调优
GC的性能指标主要考虑两个方面：吞吐量和STW时间。应尽量减少Major GC的频率。


堆大小尽量设置大一点，且-Xms和-Xmx设置相同的大小；
新生代大小设置合理，通过-Xmn参数设置，控制好新生代和老年代的比例，如果过小，则会导致频繁YGC，对象进入老年代，使老年代过早进入FullGC；
当使用CMS收集器的时候，老年代会产生内存碎片，因此要开启-XX:+UseCMSCompactAtFullCollection参数来开启对老年代内存的压缩，使用-XX:CMSFullGCsBeforeCompaction=0参数，进行多少次FullGC后压缩；
采用并发回收时，年轻代可以小一点，年老代要大，因为年老代用的是并发回收，即使时间长点也不会影响其他程序继续运行，网站不会停顿；
如果是web应用，采用CMS收集器时，可能是好的选择。

</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/02/19/8772a3dc4600/" title="常见的OOM异常">     <img class="post_bg" src="/uploads/default-header-2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常见的OOM异常"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/19/8772a3dc4600/" title="常见的OOM异常">常见的OOM异常</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-19T22:21:07.000Z" title="发表于 2021-02-19 22:21:07">2021-02-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a></span></div><div class="content">在《Java虚拟机规范》的规定里，除了程序计数器外，虚拟机内存的其他几个运行时区域都有发生 OutOfMemoryError 异常的可能，本章主要介绍相关的OOM异常。


概述常见的OOM异常为：

StackOverflowError堆栈溢出，一种常见的递归调用过深引起的异常。
Java heap space最常见的异常。
GC overhead limit exceededGC回收的耗时过长，且频繁。
Direct buffer memory本地直接内存溢出。
unable to create new native thread无法创建更多线程。
Metaspace方法区溢出。
Requested array size exceeds VM limit创建的数组超过的JVM最大长度限制。
Out of swap space
Kill process or sacrifice child操作系统层面的。

堆栈溢出比较常见的是一些需要递归调用的时候，由于每次函数调用会在当前线程生成一个栈帧，当调用过深的时候，导致栈溢出。如常见的斐波那契数列的计算，如果不判断初始条件，则很容易出现这 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/02/17/587d49719b87/" title="垃圾回收实战">     <img class="post_bg" src="/uploads/default-header-2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="垃圾回收实战"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/17/587d49719b87/" title="垃圾回收实战">垃圾回收实战</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-17T10:23:13.000Z" title="发表于 2021-02-17 10:23:13">2021-02-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a></span></div><div class="content">接下来根据详细的栗子，说明GC日志的查看，JVM参数的调整。


JVM参数配置工作中常用的JVM参数配置，及如何调优。
JVM参数类型
标准参数（-），JVM各个版本基本保持不变，相对稳定且向后兼容；
非标准参数（-X），变化较小的参数，默认JVM实现参数，且不保证向后兼容；
非Stable参数（-XX），各个JVM的实现不同，将来可能会取消。

标准参数标准参数可以输入java查看：
1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950用法: java [-options] class [args...]           (执行类)   或  java [-options] -jar jarfile [args...]           (执行 jar 文件)其中选项包括:    -d32          使用 32 位数据模型 (如果可用)    -d64          使用 64 位数据模型 (如果可用)    -server       ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/02/16/48dfb675769e/" title="垃圾回收">     <img class="post_bg" src="/uploads/default-header.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="垃圾回收"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/16/48dfb675769e/" title="垃圾回收">垃圾回收</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-16T09:40:11.000Z" title="发表于 2021-02-16 09:40:11">2021-02-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a></span></div><div class="content">Java相比C/C++的一个显著特点就是自动管理内存，不用程序员关心内存的释放，当Java程序也出现OOM异常的时候，不禁让人摸不着头脑，Java是如何实现对内存的管理的？主要是JVM实现的垃圾回收机制（Garbage collection），判断堆中的对象实例或者数据是否是垃圾，是垃圾就定时清理掉。


如何识别垃圾引用计数法简单来说，就是对象被引用一次，则在对象头上加一个引用计数增1，不在使用时减1，当引用计数变为0的时候，则认为可以回收。主要的问题，无法解决循环引用，就是A类中一个属性引用了B类对象，B类中一个属性引用了A类对象，这样一来，就算你把A类和B类的实例对象引用置为null，它们还是不会被回收；
可达性分析法核心思想为 : 通过一系列称为GC Roots的对象作为起始点，从这些节点开始向下搜索，搜索走过的路径称之为引用链，当一个对象到GC Roots没有任何的引用链相连时（从GC Roots到这个对象不可达）时，证明此对象是不可用的。
可作为GC Roots的对象有以下几种：

虚拟机栈(栈帧中的本地变量表)中引用的对象
方法区中类静态属性引用的对象
方法区中常量引用的 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/02/14/5756a042adc6/" title="JVM内存结构">     <img class="post_bg" src="/uploads/default-header-2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM内存结构"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/14/5756a042adc6/" title="JVM内存结构">JVM内存结构</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-14T18:51:09.000Z" title="发表于 2021-02-14 18:51:09">2021-02-14</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a></span></div><div class="content">Java 虚拟机定义了若干种程序运行期间会使用到的运行时数据区，其中有一些会随着虚拟机启动而创建，随着虚拟机退出而销毁。另外一些则是与线程对应，这些与线程对应的数据区域会随着线程开始和结束而创建和销毁。

线程私有的：程序计数器、栈、本地方法栈；
线程共享的：堆、方法区（永久代或元空间、代码缓存）。




程序计数器程序计数器是一块较小的内存空间，可以看作是当前线程所执行的字节码的行号指示器。如一段程序：
123456 public static void main(String[] args) &#123;     int i=10;     int j=23;     int sum = i+j;     System.out.println(sum);&#125;
在idea上使用jclasslib反编译查看字节码为：
注意：

是一块很小的存储空间，运行速度也最快；
在JVM规范中，每个线程都有它自己的程序计数器，是线程私有的，生命周期与线程的生命周期一致；
任何时间一个线程都只有一个方法在执行，也就是所谓的当前方法。如果当前线程正在执行的是 Java 方法，程序计数器记录的 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/02/13/c857e5cfb1e5/" title="JVM是什么">     <img class="post_bg" src="/uploads/default-header.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM是什么"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/13/c857e5cfb1e5/" title="JVM是什么">JVM是什么</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-13T15:22:30.000Z" title="发表于 2021-02-13 15:22:30">2021-02-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a></span></div><div class="content">我们都知道Java程序与其他面向对象语言（C++）的主要区别是一次编译跨平台运行，自动内存管理，自动垃圾回收等功能。这些功能都得益于Java提供的一种叫做JVM的东西，JVM到底是什么，为什么能做到，下文进行详细描述。



JVM是什么JVM是Java Virtual Machine的缩写，即Java虚拟机，一说起虚拟机，我们首先会想到的是诸如VMware、VisualBox等虚拟机软件，用于创建隔离主机系统的子系统。同样，JVM也是根据一定的规范，来虚构出来的一个子系统用来运行Java字节码，各个平台实现自己的虚拟机，因此，针对同一份Java字节码，可以做到不同的平台都能运行，因为JVM隔离了Java程序与底层的直接操作，将字节码解释编译成对应平台的机器指令执行。注：规范中规定了Java字节码的二进制文件格式，及各种Java指令的作用。
JVM整体结构如下图：图片来源：JavaKeeper

</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/02/13/72e0796d355d/" title="类加载子系统">     <img class="post_bg" src="/uploads/default-header.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="类加载子系统"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/13/72e0796d355d/" title="类加载子系统">类加载子系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-13T15:19:50.000Z" title="发表于 2021-02-13 15:19:50">2021-02-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a></span></div><div class="content">类加载子系统负责把二进制字节码（Class文件）装载到内存，并对数据进行校验、转换解析、初始化，最终生成被虚拟机直接使用的Java类型。


类加载子系统的作用类加载子系统的组成：
作用：

类加载子系统负责从文件系统或者网络中加载 class 文件，class 文件在文件开头有特定的文件标识（0xCAFEBABE）
ClassLoader 只负责 class 文件的加载。至于它是否可以运行，则由 Execution Engine 决定
加载的类信息存放于一块称为方法区的内存空间。除了类的信息外，方法区中还存放运行时常量池信息，可能还包括字符串字面量和数字常量（这部分常量信息是class文件中常量池部分的内存映射）
Class 对象是存放在堆区的。

类加载过程类从被加载到虚拟机内存中开始，到卸载出内存为止，它的整个生命周期包括：加载、验证、准备、解析、初始化、使用和卸载七个阶段。(验证、准备和解析又统称为连接，为了支持 Java 语言的运行时绑定，所以解析阶段也可以是在初始化之后进行的。以上顺序都只是说开始的顺序，实际过程中是交叉的混合式进行的，加载过程中可能就已经开始验证了)

1 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/01/02/170e17e7d2f9/" title="mybatis自定义TypeHandler">     <img class="post_bg" src="/uploads/default-header-2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mybatis自定义TypeHandler"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/02/170e17e7d2f9/" title="mybatis自定义TypeHandler">mybatis自定义TypeHandler</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-02T21:26:02.000Z" title="发表于 2021-01-02 21:26:02">2021-01-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%9E%B6%E6%9E%84/">架构</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Java/">Java</a></span></div><div class="content">PostgreSQL中提供了json数据类型，并支持常用的关系数据库的查询语法，在实际的工作中，存储复杂的数据带来一些便利，数据持久层的框架使用Mybatis进行处理的时候，需要单独处理Json类型的字段。在高版本的Mybatis Plus中已经对此支持了。以下纪录自定义类型处理函数来处理特定的字段类型。


自定义处理函数继承Mybatis中的BaseTypeHandler，重写其中的几个方法，使用fastjson作为json字段的序列化和反序列化工具。
1234567891011121314151617181920212223242526@MappedTypes(&#123;Object.class&#125;)public class JsonTypeHandler extends BaseTypeHandler&lt;Object&gt; &#123;    @Override    public void setNonNullParameter(PreparedStatement preparedStatement, int i, Object o, JdbcType jdb ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/5/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/#content-inner">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/#content-inner">7</a><a class="extend next" rel="next" href="/page/7/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/uploads/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">abumaster</div><div class="author-info__description">明年岂无年，心事恐蹉跎。<br/>努力尽今夕，少年犹可夸。</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">70</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">38</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/abumaster"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:gfzhang92@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">简简单单，平平凡凡</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/10/07/b46b286bda13/" title="JavaNIO之Channel">JavaNIO之Channel</a><time datetime="2022-10-07T22:02:18.000Z" title="发表于 2022-10-07 22:02:18">2022-10-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/10/06/5c59f81e0726/" title="JavaNIO中的Buffer详解">JavaNIO中的Buffer详解</a><time datetime="2022-10-06T12:49:34.000Z" title="发表于 2022-10-06 12:49:34">2022-10-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/12/4ca91dae9392/" title="创建自定义签名证书">创建自定义签名证书</a><time datetime="2022-07-12T14:07:24.000Z" title="发表于 2022-07-12 14:07:24">2022-07-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/18/63dde0a688a3/" title="Java的SPI机制详解">Java的SPI机制详解</a><time datetime="2022-01-18T20:50:13.000Z" title="发表于 2022-01-18 20:50:13">2022-01-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/16/cfd09d7196ad/" title="Spring表达式语言">Spring表达式语言</a><time datetime="2022-01-16T19:12:10.000Z" title="发表于 2022-01-16 19:12:10">2022-01-16</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maven/"><span class="card-category-list-name">maven</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/redis/"><span class="card-category-list-name">redis</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/"><span class="card-category-list-name">学习</span><span class="card-category-list-count">57</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="card-category-list-name">数据库</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/"><span class="card-category-list-name">生活</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%BC%96%E7%A8%8B/"><span class="card-category-list-name">编程</span><span class="card-category-list-count">2</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/CPP/" style="font-size: 1.1em; color: #999">CPP</a> <a href="/tags/Git/" style="font-size: 1.1em; color: #999">Git</a> <a href="/tags/JVM/" style="font-size: 1.39em; color: #99a4b4">JVM</a> <a href="/tags/Java/" style="font-size: 1.5em; color: #99a9bf">Java</a> <a href="/tags/Kafka/" style="font-size: 1.27em; color: #99a0a9">Kafka</a> <a href="/tags/Linux/" style="font-size: 1.16em; color: #999b9e">Linux</a> <a href="/tags/MongoDB/" style="font-size: 1.1em; color: #999">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 1.33em; color: #99a2af">MySQL</a> <a href="/tags/NIO/" style="font-size: 1.1em; color: #999">NIO</a> <a href="/tags/NoSql/" style="font-size: 1.1em; color: #999">NoSql</a> <a href="/tags/Reactor/" style="font-size: 1.16em; color: #999b9e">Reactor</a> <a href="/tags/Redis/" style="font-size: 1.16em; color: #999b9e">Redis</a> <a href="/tags/Spring/" style="font-size: 1.33em; color: #99a2af">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 1.16em; color: #999b9e">SpringBoot</a> <a href="/tags/http/" style="font-size: 1.1em; color: #999">http</a> <a href="/tags/maven/" style="font-size: 1.1em; color: #999">maven</a> <a href="/tags/mq/" style="font-size: 1.1em; color: #999">mq</a> <a href="/tags/mysql/" style="font-size: 1.1em; color: #999">mysql</a> <a href="/tags/redis/" style="font-size: 1.1em; color: #999">redis</a> <a href="/tags/uml/" style="font-size: 1.1em; color: #999">uml</a> <a href="/tags/web/" style="font-size: 1.1em; color: #999">web</a> <a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 1.1em; color: #999">事务</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 1.1em; color: #999">分布式</a> <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 1.21em; color: #999ea4">学习</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 1.16em; color: #999b9e">并发</a> <a href="/tags/%E6%80%9D%E7%BB%B4/" style="font-size: 1.16em; color: #999b9e">思维</a> <a href="/tags/%E6%80%9D%E8%B7%AF/" style="font-size: 1.1em; color: #999">思路</a> <a href="/tags/%E6%8A%80%E5%B7%A7/" style="font-size: 1.16em; color: #999b9e">技巧</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.1em; color: #999">数据库</a> <a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 1.44em; color: #99a7ba">架构</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 1.1em; color: #999">生活</a> <a href="/tags/%E7%A2%8E%E7%A2%8E%E5%BF%B5/" style="font-size: 1.1em; color: #999">碎碎念</a> <a href="/tags/%E7%BC%96%E7%A8%8B/" style="font-size: 1.1em; color: #999">编程</a> <a href="/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/" style="font-size: 1.16em; color: #999b9e">观察者模式</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.1em; color: #999">设计模式</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/" style="font-size: 1.1em; color: #999">软件设计</a> <a href="/tags/%E9%98%9F%E5%88%97/" style="font-size: 1.16em; color: #999b9e">队列</a> <a href="/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/" style="font-size: 1.1em; color: #999">高并发</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">十一月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">14</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">7</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">70</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2016-12-01T12:12:12.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">71.5k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-10-07T15:02:06.613Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2022 By abumaster</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>